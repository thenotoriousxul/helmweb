<app-splash-screen *ngIf="showSplash" (animationDone)="onSplashDone()"></app-splash-screen>
<div *ngIf="!showSplash" class="landing-background">
<ng-container class="fade-in-content">
<!-- Header -->
<header class="header">
  <div class="container">
    <nav class="nav">
      <div class="logo">
        <h2>Helm<span class="accent"></span></h2>
      </div>
      <button class="hamburger" (click)="toggleMobileMenu()" aria-label="Abrir menú">
        <span></span><span></span><span></span>
      </button>
      <ul class="nav-links desktop-only">
        <li><a href="#features">Características</a></li>
        <li><a href="#testimonials">Casos de Éxito</a></li>
        <li><a href="#contact">Contacto</a></li>
        
        <!-- Opciones para usuarios no autenticados -->
        <li *ngIf="!isAuthenticated">
          <a (click)="showLogin()" class="btn btn-secondary">Iniciar Sesión</a>
        </li>
        
        <!-- Opciones para usuarios autenticados -->
        <li *ngIf="isAuthenticated" class="user-menu">
          <div class="user-dropdown">
            <button class="user-btn">
              <i class="fas fa-user"></i>
              <span>{{ authService.getCurrentUser()?.fullName || 'Usuario' }}</span>
              <i class="fas fa-chevron-down"></i>
            </button>
            <div class="dropdown-menu">
              <a (click)="goToDashboard()">
                <i class="fas fa-tachometer-alt"></i>
                Panel Principal
              </a>
              <a (click)="logout()">
                <i class="fas fa-sign-out-alt"></i>
                Cerrar Sesión
              </a>
            </div>
          </div>
        </li>
      </ul>
    </nav>
  </div>
</header>

<!-- Mobile Menu Overlay -->
<div class="mobile-overlay" *ngIf="mobileMenuOpen" (click)="closeMobileMenu()"></div>
<div class="mobile-menu" [class.open]="mobileMenuOpen">
  <div class="mobile-menu-header">
    <h3>Helm</h3>
    <button class="close-btn" (click)="closeMobileMenu()" aria-label="Cerrar menú">
      <i class="fas fa-times"></i>
    </button>
  </div>
  <ul>
    <li><a href="#features" (click)="closeMobileMenu()">Características</a></li>
    <li><a href="#testimonials" (click)="closeMobileMenu()">Casos de Éxito</a></li>
    <li><a href="#contact" (click)="closeMobileMenu()">Contacto</a></li>
    <li *ngIf="!isAuthenticated"><a (click)="showLogin()">Iniciar Sesión</a></li>
    <li *ngIf="isAuthenticated" class="mobile-user">
      <div class="avatar"><i class="fas fa-user"></i></div>
      <div class="user-info">
        <div class="name">{{ displayUserName }}</div>
        <div class="role">{{ userRole | titlecase }}</div>
      </div>
    </li>
    <li *ngIf="isAuthenticated"><a (click)="goToDashboard()">Panel Principal</a></li>
    <li *ngIf="isAuthenticated"><a (click)="logout()">Cerrar Sesión</a></li>
  </ul>
  <div class="mobile-menu-footer">
    <small>&copy; 2024 Helm</small>
  </div>
  
</div>

<!-- Hero Section -->
<section class="hero">
  <div class="container">
    <div class="hero-content">
      <div class="hero-text">
        <h1 class="hero-title">
          Monitoreo Inteligente de 
          <span class="accent">Cascos IoT</span>
        </h1>
        <p class="hero-description">
          Protege a tus mineros con tecnología de vanguardia. Monitoreo en tiempo real de temperatura, 
          movimiento, ubicación y más. Seguridad que nunca duerme.
        </p>
        <div class="hero-buttons">
          <a href="#" class="btn btn-primary">
            <i class="fab fa-apple"></i>
            App Store
          </a>
          
        </div>
      </div>
      <div class="hero-visual">
        <div class="hero-image glass">
          <div class="mockup-phone iphone">
            <div class="iphone-notch">
              <div class="notch-camera"></div>
              <div class="notch-speaker"></div>
            </div>
            <div class="iphone-btn iphone-btn-left"></div>
            <div class="iphone-btn iphone-btn-right"></div>
            <div class="phone-screen">
              <div class="app-preview">
                <div class="status-bar">
                </div>
                <div class="dashboard-preview">
                  <div class="sensor-widget temp" [class.expanded]="expandedSensor === 'temperature'" (click)="toggleSensor('temperature')">
                    <span class="sensor-value" [class.changing]="temperature !== displayedTemperature">{{ displayedTemperature | number:'1.1-1' }}°C</span>
                    <span class="sensor-label">Temperatura</span>
                    
                    <!-- Datos expandidos de temperatura -->
                    <div class="sensor-details" *ngIf="expandedSensor === 'temperature'">
                      <div class="detail-row">
                        <span class="detail-label">Promedio:</span>
                        <span class="detail-value">{{ getSensorData('temperature')?.average }}°C</span>
                      </div>
                      <div class="detail-row">
                        <span class="detail-label">Mín/Máx:</span>
                        <span class="detail-value">{{ getSensorData('temperature')?.min }}°C / {{ getSensorData('temperature')?.max }}°C</span>
                      </div>
                      <div class="detail-row">
                        <span class="detail-label">Tendencia:</span>
                        <span class="detail-value trend">{{ getSensorData('temperature')?.trend }}</span>
                      </div>
                      <!-- Mini gráfico -->
                      <div class="mini-chart">
                        <svg width="80" height="20" viewBox="0 0 100 30">
                          <polyline 
                            [attr.points]="getTemperatureChartPoints()"
                            fill="none" 
                            stroke="#64ffda" 
                            stroke-width="1.5"
                          />
                        </svg>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Sustituir Movimiento por Frecuencia Cardíaca -->
                  <div class="sensor-widget hr" [class.expanded]="expandedSensor === 'hr'" (click)="toggleSensor('hr')">
                    <span class="sensor-value">72 bpm</span>
                    <span class="sensor-label">Frecuencia Cardíaca</span>
                    
                    <div class="sensor-details" *ngIf="expandedSensor === 'hr'">
                      <div class="detail-row">
                        <span class="detail-label">Rango Normal:</span>
                        <span class="detail-value">60 - 100 bpm</span>
                      </div>
                      <div class="detail-row">
                        <span class="detail-label">Promedio:</span>
                        <span class="detail-value">74 bpm</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="sensor-widget gps" [class.expanded]="expandedSensor === 'gps'" (click)="toggleSensor('gps')">
                    <span class="sensor-value">GPS</span>
                    <span class="sensor-label">Ubicación</span>
                    
                    <!-- Datos expandidos de GPS -->
                    <div class="sensor-details" *ngIf="expandedSensor === 'gps'">
                      <div class="detail-row">
                        <span class="detail-label">Distancia:</span>
                        <span class="detail-value">{{ getSensorData('gps')?.distance }}m</span>
                      </div>
                      <div class="detail-row">
                        <span class="detail-label">Velocidad:</span>
                        <span class="detail-value">{{ getSensorData('gps')?.speed }}m/s</span>
                      </div>
                      <div class="detail-row">
                        <span class="detail-label">Zona:</span>
                        <span class="detail-value">{{ getSensorData('gps')?.zone }}</span>
                      </div>
                      <!-- Mapa expandido -->
                      <div class="expanded-map">
                        <svg width="100" height="60" viewBox="0 0 100 100">
                          <rect x="5" y="5" width="90" height="90" rx="12" fill="#172a45" stroke="#3df4f4" stroke-width="1.5"/>
                          <!-- Ruta del GPS -->
                          <polyline 
                            [attr.points]="getGpsChartPoints()"
                            fill="none" 
                            stroke="rgba(100,255,218,0.3)" 
                            stroke-width="0.8"
                          />
                          <circle [attr.cx]="displayedGps.x" [attr.cy]="displayedGps.y" r="3" fill="#3df4f4" stroke="#fff" stroke-width="1.5"/>
                        </svg>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Sustituir Ambiental por MQ7 (Gas) -->
                  <div class="sensor-widget mq7" [class.expanded]="expandedSensor === 'mq7'" (click)="toggleSensor('mq7')">
                    <span class="sensor-value">3977 ppm</span>
                    <span class="sensor-label">MQ7 Gas</span>
                    
                    <div class="sensor-details" *ngIf="expandedSensor === 'mq7'">
                      <div class="detail-row">
                        <span class="detail-label">Nivel:</span>
                        <span class="detail-value">Moderado</span>
                      </div>
                      <div class="detail-row">
                        <span class="detail-label">Última lectura:</span>
                        <span class="detail-value">Hace 3s</span>
                      </div>
                    </div>
                  </div>
                  
                  <!-- Quitar Batería -->
                  
                
                  
                  <!-- Home Bar del iPhone -->
                  <div class="home-bar">
                    <div class="home-indicator"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="features" class="features">
  <div class="container">
    <div class="section-header">
      <h2>Características Principales</h2>
      <p>Tecnología avanzada para la seguridad minera</p>
    </div>
    <div class="features-grid">
      <div class="feature-card glass fade-in flip-card" *ngFor="let f of features" tabindex="0"
           [class.flipped]="f.toggled" (click)="f.toggled = !f.toggled" (keydown.enter)="f.toggled = !f.toggled">
        <div class="flip-card-inner">
          <div class="card-front">
            <div class="feature-icon" [ngClass]="f.iconType">
              <i [class]="f.iconClass"></i>
        </div>
            <h3>{{ f.title }}</h3>
      </div>
          <div class="card-back">
            <p>{{ f.description }}</p>
      </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Testimonials Section -->
<section id="testimonials" class="testimonials">
  <div class="container">
    <div class="section-header">
      <h2>Casos de Éxito</h2>
      <p>Empresas que confían en nuestra tecnología</p>
    </div>
    <div class="testimonials-grid">
      <div class="testimonial-card glass fade-in">
        <div class="testimonial-content">
          <p>" Helm ha reducido nuestros incidentes en un 85%. La detección temprana de problemas de salud ha salvado vidas en nuestras operaciones mineras de oro y plata."</p>
        </div>
        <div class="testimonial-author">
          <div class="author-info">
            <h4>Carlos Mendoza</h4>
            <span>Gerente de Seguridad, Industrias Peñoles</span>
          </div>
        </div>
      </div>
      
      <div class="testimonial-card glass fade-in">
        <div class="testimonial-content">
          <p>"La implementación fue sencilla y el ROI se vio en los primeros 3 meses. Nuestros mineros en la refinería de oro se sienten más seguros."</p>
        </div>
        <div class="testimonial-author">
          <div class="author-info">
            <h4>Ana Rodríguez</h4>
            <span>Directora de Operaciones, Industrias Peñoles Torreón</span>
          </div>
        </div>
      </div>
      
      <div class="testimonial-card glass fade-in">
        <div class="testimonial-content">
          <p>"El sistema de alertas nos permite responder inmediatamente a emergencias en nuestras operaciones de zinc y plomo. Es como tener un guardián digital."</p>
        </div>
        <div class="testimonial-author">
          <div class="author-info">
            <h4>Miguel Torres</h4>
            <span>Superintendente, Industrias Peñoles</span>
          </div>
        </div>
      </div>
      
      <div class="testimonial-card glass fade-in">
        <div class="testimonial-content">
          <p>"Con Helm hemos logrado cero accidentes fatales en 18 meses. La tecnología predictiva es revolucionaria para nuestros proyectos mineros."</p>
        </div>
        <div class="testimonial-author">
          <div class="author-info">
            <h4>Laura Sánchez</h4>
            <span>CEO, Fimsa</span>
          </div>
        </div>
      </div>
      
      <div class="testimonial-card glass fade-in">
        <div class="testimonial-content">
          <p>"Los reportes en tiempo real nos han permitido optimizar nuestras operaciones de distribución de equipos mineros y mejorar la productividad en un 40%."</p>
        </div>
        <div class="testimonial-author">
          <div class="author-info">
            <h4>Roberto Jiménez</h4>
            <span>Director Técnico, Fimsa</span>
          </div>
        </div>
      </div>
      
      <div class="testimonial-card glass fade-in">
        <div class="testimonial-content">
          <p>"La batería de larga duración y la conectividad confiable han sido clave para operaciones en minas remotas. Helm complementa perfectamente nuestros equipos de seguridad."</p>
        </div>
        <div class="testimonial-author">
          <div class="author-info">
            <h4>Patricia López</h4>
            <span>Gerente de Proyectos, Importaciones y Equipos Mineros</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Contact Section -->
<section id="contact" class="contact">
  <div class="container">
    <div class="section-header">
      <h2>Contáctanos</h2>
      <p>¿Listo para revolucionar la seguridad minera? Conecta con nosotros</p>
    </div>
    <div class="contact-content">
      <div class="contact-card glass fade-in">
        <div class="contact-icon-large">
          <i class="fas fa-envelope"></i>
        </div>
        <h3>Email Directo</h3>
        <p>proyectohelm0[at]gmail.com</p>
        <a href="mailto:proyectohelm0@gmail.com" class="contact-action-btn">
          <i class="fas fa-paper-plane"></i>
          Enviar Email
        </a>
      </div>
      
      <div class="contact-card glass fade-in">
        <div class="contact-icon-large">
          <i class="fas fa-phone"></i>
        </div>
        <h3>Línea Directa</h3>
        <p>Horario: Lunes a Viernes 9:00 AM - 6:00 PM</p>
        <button class="contact-action-btn" (click)="openPhoneModal()">
          <i class="fas fa-phone"></i>
          Ver Números
        </button>
      </div>
      
      <div class="contact-card glass fade-in">
        <div class="contact-icon-large">
          <i class="fas fa-map-marker-alt"></i>
        </div>
        <h3>Ubicación</h3>
        <p>Universidad Tecnológica de Torreón</p>
        <button class="contact-action-btn" (click)="openLocation()">
          <i class="fas fa-directions"></i>
          Ver en Mapa
        </button>
      </div>
    </div>
    
    <!-- Modal de Teléfonos -->
    <div class="phone-modal" *ngIf="showPhoneModal" (click)="closePhoneModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>Números de Contacto</h3>
          <button class="close-btn" (click)="closePhoneModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>
        <div class="phone-list">
          <div class="phone-item">
            <div class="phone-icon">
              <i class="fas fa-phone"></i>
            </div>
            <div class="phone-info">
              <h4>Teléfono Principal</h4>
              <p>+52 871 200 4633</p>
            </div>
            <a href="tel:+52 871 178 0114" class="call-btn">
              <i class="fas fa-phone"></i>
            </a>
          </div>
          <div class="phone-item">
            <div class="phone-icon">
              <i class="fas fa-mobile-alt"></i>
            </div>
            <div class="phone-info">
              <h4>WhatsApp</h4>
              <p>+52 871 507 1756</p>
            </div>
            <a href="https://wa.me/528715071756" class="call-btn whatsapp">
              <i class="fab fa-whatsapp"></i>
            </a>
          </div>
          <div class="phone-item">
            <div class="phone-icon">
              <i class="fas fa-building"></i>
            </div>
            <div class="phone-info">
              <h4>Oficina</h4>
              <p>+52 871 178 0114</p>
            </div>
            <a href="tel:+528711780114" class="call-btn">
              <i class="fas fa-phone"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Footer -->
<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <h3>Helm<span class="accent"></span></h3>
        <p>Seguridad inteligente para la minería del futuro.</p>
      </div>
      <div class="footer-section">
        <h4>Producto</h4>
        <ul>
          <li><a href="#features">Características</a></li>
          <li><a href="#">Precios</a></li>
          <li><a href="#">Documentación</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Empresa</h4>
        <ul>
          <li><a href="#">Acerca de</a></li>
          <li><a href="#">Contacto</a></li>
          <li><a href="#">Soporte</a></li>
        </ul>
      </div>
      <div class="footer-section">
        <h4>Legal</h4>
        <ul>
          <li><a href="#">Privacidad</a></li>
          <li><a href="#">Términos</a></li>
          <li><a href="#">Cookies</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2024 . Todos los derechos reservados.</p>
    </div>
  </div>
</footer> 
</ng-container> 